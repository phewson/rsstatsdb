rsstatsdb
==========

<!-- badges: start -->
<!-- badges: end -->

A small R package to help generate SQL and Bash migration scripts for the Stats19 dataset.
Most outputs are intermediate scripts — you will manually tweak the final SQL/Bash (e.g., add indexes) before running them.

---

## Purpose

- Read YAML schema definitions
- Generate `CREATE TABLE` and `INSERT` SQL snippets
- Generate Bash scripts for staging/loading data
- Provide helper functions for comparing metadata and data column names

> **Note:** This package is intended for personal/internal use. It is not a general-purpose SQL generator.

---

## Installation

From GitHub:

```r
# install.packages("remotes") if needed
remotes::install_github("yourusername/stats19sql")
library(stats19sql)
```

Usage

```
library(stats19sql)

# Read schema
schema_tbl <- read_schema_yaml("schemas/collisions.yaml")
meta <- schema_metadata(schema_tbl)

# Generate CREATE TABLE SQL
ddl <- generate_prod_ddl_from_yaml("schemas/collisions.yaml")
cat(ddl)

# Compare metadata vs actual field names
print_name_setdiffs(meta, name_lists)
```

Most SQL/Bash scripts generated by this package will be edited manually before execution.

## Development Notes

All functions have Roxygen documentation — regenerate with:

```
devtools::document()
```

Unit tests live in tests/testthat/ — run with:

```
devtools::test()
```

R CMD check should run cleanly on a fresh system. GitHub Actions CI can be used to verify builds and tests.

## Consider using:

- `covr`to check test coverage
- `lintr`for code style

before making substantial changes next year.

## Package Structure

```
R/            # R functions
man/          # Rd files generated from Roxygen
inst/schemas/ # YAML schemas
inst/scripts/ # Template SQL/Bash scripts
tests/        # Unit tests
DESCRIPTION
NAMESPACE
```

